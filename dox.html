<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Image EXIF Viewer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/exif-js/2.3.0/exif.min.js"></script>
</head>
<body>
    <h1>Upload an Image to See EXIF Metadata</h1>
    <input type="file" id="imageInput" accept="image/*">
    <div id="metadata"></div>

    <script>
        const imageInput = document.getElementById('imageInput');
        const metadataDiv = document.getElementById('metadata');

        function convertDMSToDD(d, m, s, ref) {
            let dd = d + m/60 + s/3600;
            if (ref === "S" || ref === "W") dd = dd * -1;
            return dd;
        }

        imageInput.addEventListener('change', () => {
            const file = imageInput.files[0];
            if (!file) {
                metadataDiv.innerHTML = '';
                return;
            }

            const reader = new FileReader();
            reader.onload = function(event) {
                const img = new Image();
                img.onload = function() {
                    let output = `
                        <p><strong>File Name:</strong> ${file.name}</p>
                        <p><strong>File Size:</strong> ${file.size} bytes</p>
                        <p><strong>File Type:</strong> ${file.type}</p>
                        <p><strong>Image Dimensions:</strong> ${img.width} x ${img.height}</p>
                    `;
                    metadataDiv.innerHTML = output;

                    EXIF.getData(img, function() {
                        const allMeta = EXIF.getAllTags(this);
                        let exifOutput = "<h2>EXIF Data:</h2><ul>";
                        for (let tag in allMeta) {
                            exifOutput += `<li><strong>${tag}:</strong> ${allMeta[tag]}</li>`;
                        }

                        // GPS Coordinates if available
                        const lat = EXIF.getTag(this, "GPSLatitude");
                        const lon = EXIF.getTag(this, "GPSLongitude");
                        const latRef = EXIF.getTag(this, "GPSLatitudeRef");
                        const lonRef = EXIF.getTag(this, "GPSLongitudeRef");
                        if (lat && lon) {
                            const latitude = convertDMSToDD(lat[0], lat[1], lat[2], latRef);
                            const longitude = convertDMSToDD(lon[0], lon[1], lon[2], lonRef);
                            exifOutput += `<li><strong>GPS Coordinates:</strong> ${latitude}, ${longitude}</li>`;
                        }

                        exifOutput += "</ul>";
                        metadataDiv.innerHTML += exifOutput;
                    });
                }
                img.src = event.target.result;
            }
            reader.readAsDataURL(file);
        });
    </script>
</body>
</html>
